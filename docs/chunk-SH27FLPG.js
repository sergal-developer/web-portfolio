import{d as g,e as m,g as o}from"./chunk-HRAUXDRS.js";var p=(()=>{class s{constructor(){this.trackIdGA="",this.analyticsEvents=new l}setTrackID(e){this.trackIdGA=e}getTrackID(){return this.trackIdGA}createDataLayer(){let e=document.createElement("script");e.text=`
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                // console.log('GA:', ...arguments);
                dataLayer.push(arguments);
            }
            gtag('js', new Date()); `,document.head.prepend(e),setTimeout(()=>{gtag("config",this.getTrackID())},500)}createGTagManager(){let e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id="+this.getTrackID(),document.head.prepend(e)}createTrackID(e,a){this.createGTagManager(),setTimeout(()=>{this.createDataLayer()},500)}existGtagFunc(){return typeof gtag=="function"}gtagArguments(...e){this.existGtagFunc()||this.createDataLayer(),gtag(...e)}TrackPage(e){let a=location.href.replace(location.origin,"");e=e||a;let t=this.analyticsEvents.pageView(a,e);this.gtagArguments(t.action,t.name,t.parameters)}convertoToQuery(e,a){let t=e.split(a),n={page:"",title:""};for(let r=0;r<t.length;r++)r===0?n.page=t[r]:r===1?n.page+=`?${t[r]}`:t[r].includes("reload")||(n.page+=`&${t[r]}`),t[r].includes("page")&&(n.title=t[r].replace("page=",""));return n}TrackIframe(e){let a=this.convertoToQuery(location.href,";"),t=a.page.replace(location.origin,"");t=encodeURI(t),e=e||t;let n=a?.title||e,r=this.analyticsEvents.pageView(t,n);this.gtagArguments(r.action,r.name,r.parameters)}TrackScreen(e,a){let t=this.analyticsEvents.custom("screen_view",{screen_name:a||e});this.gtagArguments(t.action,t.name,t.parameters)}TrackEvent(e,a,t,n){let r={category:t||"",label:a||location.href,value:n||null},c=this.analyticsEvents.custom(e,r);this.gtagArguments(c.action,c.name,c.parameters)}TrackSocial(e,a,t){let n={social_network:e,social_action:a,social_target:t},r=this.analyticsEvents.custom("social",n);this.gtagArguments(r.action,r.name,r.parameters)}TrackFlowEvent(e,a,t,n){let r={category:t||"",label:a||location.href};n&&(r=Object.assign(r,n));let c=this.analyticsEvents.custom(e,r);this.gtagArguments(c.action,c.name,c.parameters)}static{this.\u0275fac=function(a){return new(a||s)}}static{this.\u0275prov=o({token:s,factory:s.\u0275fac})}}return s})(),l=class{pageView(i,e,a="GLOW",t="EN-US",n="UTF-8"){return{action:"event",name:"page_view",parameters:{page_location:i,client_id:a,language:t,page_encoding:n,page_title:e}}}search(i){return{action:"event",name:"search",parameters:{search_term:i}}}custom(i,e){return{action:"event",name:i,parameters:e||{}}}};var v=(()=>{class s{constructor(){this.eventBus=new g}publish(e){this.eventBus.next(e)}subscribe(e){return this.eventBus.asObservable().pipe(m(a=>a.name===e))}static{this.\u0275fac=function(a){return new(a||s)}}static{this.\u0275prov=o({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{p as a,v as b};
